<?xml version="1.0" encoding="UTF-8"?>
<Patch>

	<Operation Class="PatchOperationAttributeSet">
		<xpath>Defs/ThingDef[defName="Proj_GrenadeFirefoam" or
								defName="Proj_GrenadeSmoke" or
								defName="Proj_GrenadeStickBomb" or
								defName="Proj_GrenadeFlashbang"]</xpath>
		<attribute>ParentName</attribute>
		<value>SK.SK_BaseGrenadeProjectileDummy</value>
	</Operation>

	<!-- Config error in Weapon_GrenadeConcussion: verb 0: has incorrect forcedMiss settings; explosive projectiles and only explosive projectiles should have forced miss enabled -->
	<!-- But WHYYYYY??? -->
	<Operation Class="PatchOperationRemove">
		<xpath>Defs/ThingDef[defName="Proj_GrenadeConcussion" or
								defName="Weapon_GrenadeConcussion"]</xpath>
	</Operation>

	<Operation Class="SK.PatchOperationReplaceExtended">
		<xpath>Defs/ThingDef[defName="Proj_GrenadeFlashbang"]/projectile</xpath>
		<value>
			<explosionRadius>4</explosionRadius>
			<damageDef>Stun</damageDef>
			<damageAmountBase>55</damageAmountBase>
			<explosionDelay>30</explosionDelay>
			<soundExplode>Explosion_Stun</soundExplode>
			<dropsCasings>true</dropsCasings>
			<casingMoteDefname>Fleck_GrenadePin</casingMoteDefname>
			<casingFilthDefname>Filth_GrenadeAmmoCasings</casingFilthDefname>
			<speed>10</speed>
			<screenShakeFactor>0</screenShakeFactor>
			<suppressionFactor>1.1</suppressionFactor>
			<dangerFactor>1.5</dangerFactor>
			<airborneSuppressionFactor>0.25</airborneSuppressionFactor>
		</value>
	</Operation>

	<Operation Class="SK.PatchOperationReplaceExtended">
		<xpath>Defs/ThingDef[defName="Weapon_GrenadeFlashbang"]</xpath>
		<value>
			<smeltable>true</smeltable>
			<comps>
				<li Class="CombatExtended.CompProperties_ExplosiveCE">
					<damageAmountBase>25</damageAmountBase>
					<explosiveDamageType>Stun</explosiveDamageType>
					<explosiveRadius>4</explosiveRadius>
					<explosionSound>Explosion_Stun</explosionSound>
				</li>
			</comps>
			<smeltProducts>
				<Plasteel>3</Plasteel>
				<Powder>1</Powder>
				<ComponentIndustrial>1</ComponentIndustrial>
			</smeltProducts>
			<statBases>
				<MarketValue>1.6</MarketValue>
			</statBases>
		</value>
	</Operation>

	<Operation Class="SK.PatchOperationReplaceExtended">
		<xpath>Defs/ThingDef[defName="Proj_GrenadeStickBomb"]/projectile</xpath>
		<value>
			<explosionRadius>2</explosionRadius>
			<damageDef>Bomb</damageDef>
			<damageAmountBase>70</damageAmountBase>
			<explosionDelay>175</explosionDelay>
			<soundExplode>Explosion_Bomb</soundExplode>
			<applyDamageToExplosionCellsNeighbors>true</applyDamageToExplosionCellsNeighbors>
			<speed>8</speed>
			<suppressionFactor>1.3</suppressionFactor>
			<dangerFactor>2.0</dangerFactor>
			<airborneSuppressionFactor>0.25</airborneSuppressionFactor>
		</value>
	</Operation>

	<Operation Class="SK.PatchOperationReplaceExtended">
		<xpath>Defs/ThingDef[defName="Weapon_GrenadeStickBomb"]</xpath>
		<value>
			<smeltable>true</smeltable>
			<weaponTags>
				<li>GrenadeDestructive</li>
				<li>CE_GrenadeNeolithic</li>
				<li>GrenadeTierZero</li>
				<li>CE_AI_Grenade</li>
				<li>CE_AI_AOE</li>
			</weaponTags>
			<smeltProducts>
				<Cloth>3</Cloth>
				<ComponentMedieval>2</ComponentMedieval>
				<FSX>1</FSX>
			</smeltProducts>
			<statBases>
				<MarketValue>2.4</MarketValue>
			</statBases>
		</value>
	</Operation>

	<Operation Class="SK.PatchOperationReplaceExtended">
		<xpath>Defs/ThingDef[defName="Weapon_GrenadeStickBomb"]/verbs/li[@Class="CombatExtended.VerbPropertiesCE"]</xpath>
		<value>
			<label>throw stick bomb</label>
			<verbClass>CombatExtended.Verb_ShootCEOneUse</verbClass>
			<hasStandardCommand>true</hasStandardCommand>
			<!--<forcedMissRadius>1.2</forcedMissRadius>-->
			<range>10.0</range>
			<warmupTime>1.45</warmupTime>
			<noiseRadius>4</noiseRadius>
			<minRange>2</minRange>
			<ai_IsBuildingDestroyer>true</ai_IsBuildingDestroyer>
			<soundCast>ThrowGrenade</soundCast>
			<targetParams>
				<canTargetLocations>true</canTargetLocations>
			</targetParams>
			<defaultProjectile>Proj_GrenadeStickBomb</defaultProjectile>
			<onlyManualCast>true</onlyManualCast>
			<ignorePartialLoSBlocker>true</ignorePartialLoSBlocker>
			<ai_AvoidFriendlyFireRadius>6</ai_AvoidFriendlyFireRadius>
		</value>
	</Operation>

	<Operation Class="SK.PatchOperationReplaceExtended">
		<xpath>Defs/ThingDef[defName="Proj_GrenadeSmoke"]/projectile</xpath>
		<value>
			<explosionRadius>4</explosionRadius>
			<damageDef>Smoke</damageDef>
			<explosionDelay>130</explosionDelay>
			<postExplosionGasType>BlindSmoke</postExplosionGasType>
			<dropsCasings>true</dropsCasings>
			<casingMoteDefname>Fleck_GrenadePin</casingMoteDefname>
			<casingFilthDefname>Filth_GrenadeAmmoCasings</casingFilthDefname>
			<arcHeightFactor>0.2</arcHeightFactor>
			<shadowSize>0.6</shadowSize>
			<suppressionFactor>0.0</suppressionFactor>
			<dangerFactor>0.0</dangerFactor>
			<airborneSuppressionFactor>0.05</airborneSuppressionFactor>
		</value>
	</Operation>

	<Operation Class="SK.PatchOperationReplaceExtended">
		<xpath>Defs/ThingDef[defName="Weapon_GrenadeSmoke"]</xpath>
		<value>
			<statBases>
				<MarketValue>1.7</MarketValue>
			</statBases>
		</value>
	</Operation>

	<Operation Class="SK.PatchOperationReplaceExtended">
		<xpath>Defs/ThingDef[defName="Weapon_GrenadeFirefoam"]</xpath>
		<value>
			<smeltable>true</smeltable>
			<smeltProducts>
				<Plasteel>4</Plasteel>
				<Plastic>1</Plastic>
				<Powder>1</Powder>
				<ComponentIndustrial>1</ComponentIndustrial>
			</smeltProducts>
			<statBases>
				<MarketValue>2.8</MarketValue>
			</statBases>
		</value>
	</Operation>

</Patch>