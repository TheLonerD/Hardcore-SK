<?xml version="1.0" encoding="UTF-8"?>
<Patch>

	<Operation Class="PatchOperationAttributeSet">
		<xpath>Defs/ThingDef[@Name="TurretBase" and @ParentName="BuildingBase"]</xpath>
		<attribute>ParentName</attribute>
		<value>SK.SK_BuildingBaseDummy</value>
	</Operation>
	<Operation Class="SK.PatchOperationReplaceExtended">
		<xpath>Defs/ThingDef[@Name="TurretBase"]</xpath>
		<value>
			<statBases>
				<MaxHitPoints>100</MaxHitPoints>
				<Flammability>0.1</Flammability>
				<WorkToBuild>6000</WorkToBuild>
				<Beauty>-60</Beauty>
			</statBases>
			<building>
				<turretTopDrawSize>4</turretTopDrawSize>
				<ai_combatDangerous>false</ai_combatDangerous>
				<buildingTags>
					<li>ForceBuildDuringSiege</li>
				</buildingTags>
			</building>
			<weaponClasses>
				<li>Ranged</li>
			</weaponClasses>
			<thingCategories>
				<li>BuildingsSecurity</li>
			</thingCategories>
		</value>
	</Operation>

	<Operation Class="SK.PatchOperationReplaceExtended">
		<xpath>Defs/ThingDef[defName="Artillery_Mortar"]/statBases</xpath>
		<value>
			<MarketValue>1500</MarketValue>
			<SightsEfficiency>0.75</SightsEfficiency>
			<ShotSpread>0.12</ShotSpread>
			<SwayFactor>1.15</SwayFactor>
			<RangedWeapon_Cooldown>4</RangedWeapon_Cooldown>
		</value>
	</Operation>

	<Operation Class="PatchOperationReplace">
		<xpath>Defs/ThingDef[defName="Artillery_Mortar"]/verbs</xpath>
		<value>
			<verbs>
				<li Class="CombatExtended.VerbPropertiesCE">
					<verbClass>CombatExtended.Verb_ShootMortarCE</verbClass>
					<forceNormalTimeSpeed>false</forceNormalTimeSpeed>
					<hasStandardCommand>true</hasStandardCommand>
					<defaultProjectile>Bullet_81mmMortarShell_HE</defaultProjectile>
					<warmupTime>3.0</warmupTime>
					<minRange>32</minRange>
					<range>280</range>
					<burstShotCount>1</burstShotCount>
					<soundCast>Mortar_LaunchA</soundCast>
					<muzzleFlashScale>16</muzzleFlashScale>
					<circularError>1</circularError>
					<indirectFirePenalty>1.0</indirectFirePenalty>
					<targetParams>
						<canTargetLocations>true</canTargetLocations>
					</targetParams>
				</li>
			</verbs>
		</value>
	</Operation>

	<Operation Class="SK.PatchOperationReplaceExtended">
		<xpath>Defs/ThingDef[defName="Turret_MiniTurret"]/statBases</xpath>
		<value>
			<Flammability>1.0</Flammability>
			<WorkToBuild>800</WorkToBuild>
			<Mass>25</Mass>
			<Bulk>15</Bulk>
		</value>
	</Operation>

	<Operation Class="SK.PatchOperationReplaceExtended">
		<xpath>Defs/ThingDef[defName="Turret_KPV"]</xpath>
		<value>
			<label>14.5mm KPV MG</label>
			<stuffCategories>
				<li>RuggedMetallic</li>
			</stuffCategories>
			<costStuffCount>80</costStuffCount>
			<costList>
				<KPV_Crate>1</KPV_Crate>
			</costList>
			<designationCategory>Security</designationCategory>
			<minifiedDef>MinifiedTurret_KPV</minifiedDef>
			<researchPrerequisites>
				<li>Heavy_turrets_C2</li>
			</researchPrerequisites>
			<constructionSkillPrerequisite>11</constructionSkillPrerequisite>
		</value>
	</Operation>

	<Operation Class="PatchOperationRemove">
		<xpath>Defs/ThingDef[defName="Turret_KPV"]/designatorDropdown</xpath>
	</Operation>

	<Operation Class="SK.PatchOperationReplaceExtended">
		<xpath>Defs/ThingDef[defName="Turret_AGSThirty"]</xpath>
		<value>
			<stuffCategories>
				<li>RuggedMetallic</li>
			</stuffCategories>
			<costStuffCount>70</costStuffCount>
			<costList>
				<AGSturret_Crate>1</AGSturret_Crate>
			</costList>
			<researchPrerequisites>
				<li>Grenade_launchers_C2</li>
			</researchPrerequisites>
			<constructionSkillPrerequisite>10</constructionSkillPrerequisite>
		</value>
	</Operation>

	<Operation Class="PatchOperationRemove">
		<xpath>Defs/ThingDef[defName="Turret_AGSThirty"]/designatorDropdown</xpath>
	</Operation>

	<Operation Class="SK.PatchOperationReplaceExtended">
		<xpath>Defs/ThingDef[defName="Turret_Flak"]</xpath>
		<value>
			<costListForDifficulty IsNull="True" />
			<stuffCategories>
				<li>RuggedMetallic</li>
			</stuffCategories>
			<costStuffCount>140</costStuffCount>
			<costList>
				<FlakTurret_Crate>1</FlakTurret_Crate>
			</costList>
			<building>
				<turretGunDef>Gun_FlakTurret</turretGunDef>
				<turretTopDrawSize>4</turretTopDrawSize>
				<buildingTags>
					<li>Artillery</li>
					<li>Artillery_BaseDestroyer</li>
				</buildingTags>
			</building>
			<size>(2,2)</size>
			<minifiedDef>MinifiedTurret_Flak</minifiedDef>
			<researchPrerequisites>
				<li>Mortars</li>
			</researchPrerequisites>
			<constructionSkillPrerequisite>14</constructionSkillPrerequisite>
			<damageMultipliers IsNull="True"/>
		</value>
	</Operation>

	<Operation Class="PatchOperationRemove">
		<xpath>Defs/ThingDef[defName="Turret_Flak"]/designatorDropdown</xpath>
	</Operation>

	<Operation Class="SK.PatchOperationReplaceExtended">
		<xpath>Defs/ThingDef[defName="Turret_Blaster"]</xpath>
		<value>
			<stuffCategories>
				<li>RuggedMetallic</li>
			</stuffCategories>
			<costStuffCount>100</costStuffCount>
			<costList>
				<SentryBlasterTurret_Crate>1</SentryBlasterTurret_Crate>
			</costList>
			<comps>
				<li Class="CompProperties_Power">
					<compClass>CompPowerTrader</compClass>
					<basePowerConsumption>1200</basePowerConsumption>
				</li>
				<li Class="CompProperties_Flickable" />
				<li Class="CompProperties_Breakdownable" />
			</comps>
			<minifiedDef>MinifiedTurret_Blaster</minifiedDef>
			<researchPrerequisites>
				<li>Autoturrets_E1</li>
			</researchPrerequisites>
			<constructionSkillPrerequisite>16</constructionSkillPrerequisite>
		</value>
	</Operation>

	<Operation Class="PatchOperationRemove">
		<xpath>Defs/ThingDef[defName="Turret_Blaster"]/designatorDropdown</xpath>
	</Operation>

	<Operation Class="SK.PatchOperationReplaceExtended">
		<xpath>Defs/ThingDef[defName="Turret_M240B"]</xpath>
		<value>
			<stuffCategories>
				<li>RuggedMetallic</li>
			</stuffCategories>
			<costStuffCount>60</costStuffCount>
			<costList>
				<M240B_Crate>1</M240B_Crate>
			</costList>
			<minifiedDef>MinifiedTurret_M240B</minifiedDef>
			<researchPrerequisites>
				<li>SniperTurret</li>
			</researchPrerequisites>
			<constructionSkillPrerequisite>8</constructionSkillPrerequisite>
		</value>
	</Operation>

	<Operation Class="PatchOperationRemove">
		<xpath>Defs/ThingDef[defName="Turret_M240B"]/designatorDropdown</xpath>
	</Operation>

	<Operation Class="SK.PatchOperationReplaceExtended">
		<xpath>Defs/ThingDef[defName="Turret_Sniper"]</xpath>
		<value>
			<label>sentry laserbeam turret</label>
			<graphicData>
				<texPath>Things/Building/Security/PrecisionTurretBase</texPath>
				<graphicClass>Graphic_Single</graphicClass>
				<drawSize>(2,2)</drawSize>
				<shadowData>
					<volume>(0.3, 0.6, 0.3)</volume>
				</shadowData>
			</graphicData>
			<techLevel>Spacer</techLevel>
			<uiIconPath>Things/Building/Security/PrecisionTurretGun_ico</uiIconPath>
			<statBases>
				<MaxHitPoints>130</MaxHitPoints>
				<Flammability>1.0</Flammability>
				<WorkToBuild>1200</WorkToBuild>
				<Mass>22</Mass>
				<Bulk>26</Bulk>
			</statBases>
			<stuffCategories>
				<li>RuggedMetallic</li>
			</stuffCategories>
			<costStuffCount>100</costStuffCount>
			<costList>
				<LaserTurret_Crate>1</LaserTurret_Crate>
			</costList>
			<comps>
				<li Class="CompProperties_Power">
					<compClass>CompPowerTrader</compClass>
					<basePowerConsumption>1500</basePowerConsumption>
				</li>
				<li Class="CompProperties_Flickable" />
				<li Class="CompProperties_Breakdownable" />
				<li Class="CompProperties_Stunnable">
					<affectedDamageDefs>
						<li>EMP</li>
					</affectedDamageDefs>
				</li>
			</comps>
			<description>An AI-controlled highly calibrated gun turret with advanced optics. This allows it to deliver a single but precise laserbeam at fairly long distances. Requires 1,500 W to function.\nCaliber: Charged laser beam</description>
			<size>(1,1)</size>
			<designationCategory>Security</designationCategory>
			<specialDisplayRadius>3</specialDisplayRadius>
			<building>
				<turretGunDef>Gun_TurretSniper</turretGunDef>
				<turretTopDrawSize>4</turretTopDrawSize>
			</building>
			<thingCategories>
				<li>BuildingsSecurity</li>
			</thingCategories>
			<minifiedDef>MinifiedTurret_Sniper</minifiedDef>
			<researchPrerequisites>
				<li>Autoturrets_E1</li>
			</researchPrerequisites>
			<constructionSkillPrerequisite>15</constructionSkillPrerequisite>
		</value>
	</Operation>
</Patch>